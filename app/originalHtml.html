<div class='masterpiece-container'>
	<div class='-masterpiece'>
		<div class='wrapper'>
			<div class='fr-breadcrumbs u-only-pc'>
				<ol class='fr-breadcrumbs_inner'>
					<li class='fr-breadcrumbs_item'><a class='fr-breadcrumbs_itemLink js-trackEvent' href='/'
							data-category='L3_20ss_masterpiece' data-label='breadcrumb_home'>
							HOME
						</a></li>
					<li class='fr-breadcrumbs_item js-trackEvent' data-label='breadcrumb_masterpiece'>
						<a href='/us/en/page/masterpiece'>
							MASTERPIECE
						</a>
					</li>
				</ol>
			</div>
			<main class='main' style='opacity: 0;'>
			</main>
		</div>
	</div>
</div>


<script>
	var state = {
		loading: true,
		menuSelectedItem: '',
		filter: 'all',
		contentSelected: '',
		width: window.innerWidth,
		// siteUrl: '/',
		siteUrl: '/us/en/page/masterpiece.html',
		// siteUrl: '/us/en/fc-pg-tmq.html',
		currentUrl: window.location.href,
		defaultImg: 'https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/square999999.jpg'
	}




	var masterpieceData = [{
			image: `https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/masterpiece_37_Colorful-50-socks.jpg`,
			productHeroImgs: [``],
			title: `From the nation who takes socks seriously`,
			productName: `Colorful 50 Socks`,
			gender: [`Men`],
			category: `Innerwear`,
			url: `?product=colorful-50-socks&category=innerwear`,
			productCopy: `In Japan, it&apos;s customary to take off your shoes inside, which makes socks innerwear and an accessory seen by others. This demands they be comfortable, durable, and stylish. UNIQLO is spreading this standard globally with special self-deodorizing thread that&apos;s hole-resistant and designed to help socks stay in place shoes of all types. What’s more, we have the a truly staggering variety of colors, making these Color Socks a true luxury for your feet.`,
			relatedProducts: {
				title: `Stylish comfort for feet around the world.`,
				productList: [{
					sku: '423540',
					gender: `Men`,
					ctaUrl: `https://www.uniqlo.com/us/en/men/socks-and-tights/anti-odor-color-socks`,
					ctaCopy: `View All Related Products`
				}]
			}
		},
		{
			image: `https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/masterpiece_32_M's-Vintage-regular-fit-chino-pants.jpg`,
			productHeroImgs: [``],
			title: `Vintage on the outside, modern day on the inside`,
			productName: `Vintage Regular Fit Chinos`,
			gender: [`Men`],
			category: `Bottoms`,
			url: `?product=vintage-regular-fit-chinos&category=bottoms`,
			productCopy: `Which details are imperative to acheive a vintage chino look? The pocket shape? The zipper quality? The durability of the stitchwork? Which details give it authentic character? These are all important qualities, but the real key is the construction of the fabric. We updated the materials to lend a rugged, vintage feel on the outside but tweaked the design for today with a soft texture on the inside.`,
			relatedProducts: {
				title: `For outstanding comfort on the inside.`,
				productList: [{
					sku: '422371',
					gender: `Men`,
					ctaUrl: `https://www.uniqlo.com/us/en/men/chino-pants/vintage-regular-fit`,
					ctaCopy: `View All Related Products`
				}]
			}
		},
		{
			image: `https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/masterpiece_34_M's-Dry-pique-polo.jpg`,
			productHeroImgs: [``],
			title: `Quality makes the first impression`,
			productName: `Dry Pique Polo Shirt`,
			gender: [`Men`],
			category: `Tops`,
			url: `?product=dry-pique-polo-shirt&category=tops`,
			productCopy: `What makes or breaks a polo shirt are the collars and the sleeves. Wash after wash, the sharp lines give way. We decided to swap the thread used in these areas with fabric woven using air pressure to prevent lint fluff and double-layered the button strip to boost durability. This makes them incredibly versatile, able to be styled alone casually or paired it with a blazer for a more formal look.`,
			relatedProducts: {
				title: `Fool-proof style thanks to the sleeves and collar design.`,
				productList: [{
					sku: '422987',
					gender: `Men`,
					ctaUrl: `https://www.uniqlo.com/us/en/men/polo-shirts/dry-pique`,
					ctaCopy: `View All Related Products`
				}]
			}
		},
		{
			image: `https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/masterpiece_24_W's-supima-cotton-T-shirt.jpg`,
			productHeroImgs: [
				`https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/masterpiece_34_M's-supima-cotton-T-shirt.jpg`
			],
			title: `SUPIMA®: Because basic does not lie`,
			productName: `Supima Cotton Crew Neck T-shirt`,
			gender: [`women`, `men`],
			category: `Tops`,
			url: `?product=supima-cotton-crew-neck-t_shirt&category=tops`,
			productCopy: `The finest Pima cotton, grown in the high dry land of Pima, Arizona, is called Supima® (superior pima). It represents less than1% of cotton grown in the world and is highly sought after, but we didn&apos;t hesitate to use it for T-shirts. Because when you try to upgrade the ultimate basic, you must use premium material. You&apos;ll recognize the high-quality color and soft texture at first touch, because basic does not lie.`,
			relatedProducts: {
				title: `Top quality for the most basic style.`,
				productList: [{
						sku: '422697',
						gender: `Women`,
						ctaUrl: `https://www.uniqlo.com/us/en/women/t-shirts-and-tops/essential-tees`,
						ctaCopy: `View All Related Products`
					},
					{
						sku: '422990',
						gender: `Men`,
						ctaUrl: `https://www.uniqlo.com/us/en/men/t-shirts/essential-t-shirts`,
						ctaCopy: `View All Related Products`
					}
				]
			}
		},
		{
			image: `https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/masterpiece_24_34_Uniqlo-U-crew-neck-Tshirts.jpg`,
			productHeroImgs: [``],
			title: `T-shirts that evolve with the times`,
			productName: `Crew Neck T-shirt`,
			gender: [`women`, `men`],
			category: `Tops`,
			url: `?product=crew-neck-t_shirt&category=tops`,
			productCopy: `Some might treat the T-shirt as an already-perfected design, but we believe attention to detail reveals much potential for improvement. Driven by this belief, we scrutinized the thread and color quality along with the density of the fabric so the design maintains its shape longer than ever before. We&apos;re proud to introduce the next classic T-shirt that&apos;s universally flattering and multi-functional.`,
			relatedProducts: {
				title: `The ultimate classic you&apos;ll always look good in.`,
				productList: [{
						sku: '424873',
						gender: `Women`,
						ctaUrl: `https://www.uniqlo.com/us/en/women/t-shirts/essential-t-shirts`,
						ctaCopy: `View All Related Products`
					},
					{
						sku: '422992',
						gender: `Men`,
						ctaUrl: `https://www.uniqlo.com/us/en/men/t-shirts/essential-t-shirts`,
						ctaCopy: `View All Related Products`
					}
				]
			}
		},
		{
			image: `https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/masterpiece_33_M's-EFC-broad-shirts.jpg`,
			productHeroImgs: [``],
			title: `A shirt made with everyone in mind`,
			productName: `Extra Fine Cotton Broad Shirt`,
			gender: [`Men`],
			category: `Tops`,
			url: `?product=extra-fine-cotton-broad-shirt&category=tops`,
			productCopy: `Casual shirts can make their own style statement thanks to 100% extra-long cotton fibers, known for allowing dye to seep to their core to acheive high-quality color saturation. That’s not all: We also adjust the density of the weave according to the pattern design like stripes or checks. UNIQLO believes everyone should be able to revel in the simplicity of premium quality, and this is how we acheive it.`,
			relatedProducts: {
				title: `High-quality colors and patterns, carefully calculated by thread choice.`,
				productList: [{
					sku: '426930',
					gender: `Men`,
					ctaUrl: `https://www.uniqlo.com/us/en/men/casual-shirts/extra-fine-cotton`,
					ctaCopy: `View All Related Products`
				}]
			}
		},
		{
			image: `https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/masterpiece_33_M's-super-non-iron-shirt_SW_NP.jpg`,
			productHeroImgs: [``],
			title: `Farewell to ironing.`,
			productName: `Super Non-Iron Shirt`,
			gender: [`Men`],
			category: `Tops`,
			url: `?product=super-non_iron-shirt&category=tops`,
			productCopy: `Even if it’s a non-iron shirt, it’s pointless if it feels and looks uncomfortable. UNIQLO not only pursues style and comfort, but also low-maintenance care, all at once. For the high-quality look, we’ve selected premium materials and treated them with a special easy-care finishing technology, particularly to the wrinkle-prone sleeves and underarm areas so that these shirts are both stylish and convenient. *Depending on washing method, light ironing may be needed.`,
			relatedProducts: {
				title: `Beautiful and comfortable, whenever and wherever.`,
				productList: [{
					sku: '427171',
					gender: `Men`,
					ctaUrl: `https://www.uniqlo.com/us/en/men/dress-shirts/slim-fit/super-non-iron`,
					ctaCopy: `View All Related Products`
				}]
			}
		},
		{
			image: `https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/masterpiece_33_M's-Fine-cloth-easy-care-shirt_NP.jpg`,
			productHeroImgs: [``],
			title: `You can tell the quality by the collar`,
			productName: `Fine Cloth Shirt`,
			gender: [`Men`],
			category: `Tops`,
			url: `?product=fine-cloth-shirt&category=tops`,
			productCopy: `At UNIQLO, we believe a shirt is only as good as its stitching. Our masters of needlework ensure our shirts are in a class all their own. For many years, they have kept the industry going, and their influence can be seen throughout every step of our production. Take the collar for example: it must be perfectly symmetrical and stand crisply on its own. To achieve this, each one is carefully stitched together using a special method designed by the masters, creating high-quality design that&apos;s truly made for everyone.`,
			relatedProducts: {
				title: `Master-level stitching in every collar.`,
				productList: [{
					sku: '427131',
					gender: `Men`,
					ctaUrl: `https://www.uniqlo.com/us/en/men/dress-shirts`,
					ctaCopy: `View All Related Products`
				}]
			}
		},
		{
			image: `https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/masterpiece_23_W's-rayon-blouse.jpg`,
			productHeroImgs: [``],
			title: `Low-maintenance yet highly refined`,
			productName: `Rayon Blouse`,
			gender: [`Women`],
			category: `Tops`,
			url: `?product=rayon-blouse&category=tops`,
			productCopy: `Rayon can be a finicky fabric, but at UNIQLO we like a challenge. Our secret is the special thread hybrid thread that&apos;s part-rayon for luster, part-polyester for durability that leaves the rayon fabric soft and easy to care for. The only thing lost is the extra time it takes you to maintain.`,
			relatedProducts: {
				title: `Easy to care for thanks to special thread.`,
				productList: [{
					sku: '424643',
					gender: `Women`,
					ctaUrl: `https://www.uniqlo.com/us/en/women/shirts-and-blouses/rayon-blouses`,
					ctaCopy: `View All Related Products`
				}]
			}
		},
		{
			image: `https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/masterpiece_31_M's-Comfort-jacket.jpg`,
			productHeroImgs: [``],
			title: `Small details speak volumes.`,
			productName: `Comfort jacket`,
			gender: [`Men`],
			category: `Outerwear`,
			url: `?product=comfort-jacket&category=outerwear`,
			productCopy: `To engineer a jacket with ultimate comfort, we started with stretchy jersey and gave it a brushed wool-like texture for a more formal look. We then ergonomically tweaked the positioning and placement of the collar so it&apos;s always sharp. All this was done to ensure that this jacket is as supremely stylish as it is completely comfortable.`,
			relatedProducts: {
				title: `Uncompromising comfort and style.`,
				productList: [{
					sku: '425035',
					gender: `Men`,
					ctaUrl: `https://www.uniqlo.com/us/en/men/outerwear-and-blazers/blazers`,
					ctaCopy: `View All Related Products`
				}]
			}
		},
		{
			image: `https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/masterpiece_33_M's-Premium-Linen-Shirt.jpg`,
			productHeroImgs: [``],
			title: `Linen: Transformed by Human Hands`,
			productName: `Premium Linen Shirt`,
			gender: [`women`, `men`],
			category: `Tops`,
			url: `?product=premium-linen-shirt&category=tops`,
			productCopy: `The oldest textile in the world, linen is mainly produced in Northern France. The premium linen used by UNIQLO has a distinct, signature texture thanks to little knots in the fiber called “Neps,” but a balance must be found between too many and too few. To achieve this, we remove excess Neps from the fabric one-by-one with tweezers—a process requiring patience as well as the steady hand and keen eyes of highly skilled textile experts.`,
			relatedProducts: {
				title: `Handcrafted luxury created by experts.`,
				productList: [{
						sku: '426582',
						gender: `Women`,
						ctaUrl: `https://www.uniqlo.com/us/en/women/linen-collection/shirts-and-blouses`,
						ctaCopy: `View All Related Products`
					},
					{
						sku: '425062',
						gender: `Men`,
						ctaUrl: `https://www.uniqlo.com/us/en/men/linen-collection/shirts`,
						ctaCopy: `View All Related Products`
					}
				]
			}
		},
	];
	var errorPage = () => {
		var error = `
			<div class='error-page'>
				<p class='bold' style='text-align: center'>Page Not Found</p>
				<a class='c-topPageButton js-trackEvent' href='${state.siteUrl}'
					data-label='article_cta_back_to_masterpiece'>
					<figure class='u-imgAdjustBox' data-aspect-ratio='322:119'>
						<div class='u-imgAdjustBox_inner'>
								<img
								class='fr-img lazyloaded'
								src='https://image.uniqlo.com//UQ/ST3/us/imagesother/home/uniqlomasterpiece-horizontal.png'
								data-original='https://image.uniqlo.com//UQ/ST3/us/imagesother/home/uniqlomasterpiece-horizontal.png'
								alt='UNIQLO MASTERPIECE BACK TO TOP' data-expand='300'>
								<p>BACK TO TOP</p>
								<div class='arrow-container'><div class='arrow long-arrow-left'></div></div>
						</div>
					</figure>
				</a>
			</div>`
		$('.main').html(error)
	}

	//Homepage Components
	var homepageMenu = () => {
		var menu = `
				<div class='l-navigation_head'>
					<figure class='u-imgAdjustBox' data-sp-aspect-ratio='90:235' data-pc-aspect-ratio='172:45'>
						<picture class='u-imgAdjustBox_inner menu'>
							${state.width > 768 ? 
								`<img class='fr-img lazyload' 
									src='https://image.uniqlo.com//UQ/ST3/us/imagesother/home/uniqlomasterpiece-stacked.png'
									data-original='https://image.uniqlo.com//UQ/ST3/us/imagesother/home/uniqlomasterpiece-stacked.png'
									alt='UNIQLO MASTERPIECE' data-expand='300'>`
							:
								`<img class='fr-img lazyload img-horizontal' style='height:100%'
									src='https://image.uniqlo.com//UQ/ST3/us/imagesother/home/uniqlomasterpiece-horizontal.png'
									data-original='https://image.uniqlo.com//UQ/ST3/us/imagesother/home/uniqlomasterpiece-horizontal.png'
									alt='UNIQLO MASTERPIECE' data-expand='300'>`
							}
						</picture>
					</figure>
				</div>

				<!-- Navigation -->
				<div class='l-navigation_wrapper'>
					<ul class='l-navigation_body' data-navigation-position='default'>
						<li  class='l-navigation_item js-smoothScroll is-active -all js-trackEvent'
							data-i ='0'
							data-filter-button='all' data-link='.l-container' data-category='L3_20ss_masterpiece'
							data-label='hp_menu_all'><span>ALL</span>
						</li>
						<li class='l-navigation_item js-smoothScroll -outer js-trackEvent' data-filter-button='outerwear'
						data-i ='1' data-link='.l-container' data-category='L3_20ss_masterpiece'
							data-label='hp_menu_outerwear'>
							<figure class='u-imgAdjustBox l-navigation_icon' data-aspect-ratio='1:1'>
								<picture class='u-imgAdjustBox_inner l-navigation_iconInner'><img
										class='fr-img lazyload'
										src='https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-outer.svg'
										data-original='https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-outer.svg'
										alt='OUTER' data-expand='300'></picture>
							</figure><span class='u-only-pc'>OUTERWEAR</span>
						</li>
						<li class='l-navigation_item js-smoothScroll -tops js-trackEvent' data-filter-button='tops'
							data-link='.l-container' data-category='L3_20ss_masterpiece'
							data-label='hp_menu_tops' data-i ='2'>
							<figure class='u-imgAdjustBox l-navigation_icon' data-aspect-ratio='1:1'>
								<picture class='u-imgAdjustBox_inner l-navigation_iconInner'><img
										class='fr-img lazyload'
										src='https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-tops.svg'
										data-original='https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-tops.svg'
										alt='TOPS' data-expand='300'></picture>
							</figure><span class='u-only-pc'>TOPS</span>
						</li>
						<li class='l-navigation_item js-smoothScroll -bottoms js-trackEvent' data-i ='3'
							data-filter-button='bottoms' data-link='.l-container' data-category='L3_20ss_masterpiece'
							data-label='hp_menu_bottoms'>
							<figure class='u-imgAdjustBox l-navigation_icon' data-aspect-ratio='1:1'>
								<picture class='u-imgAdjustBox_inner l-navigation_iconInner'><img
										class='fr-img lazyload'
										src='https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-bottoms.svg'
										data-original='https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-bottoms.svg'
										alt='BOTTOMS' data-expand='300'></picture>
							</figure><span class='u-only-pc'>BOTTOMS</span>
						</li>
						<li data-i ='4' class='l-navigation_item js-smoothScroll -dress js-trackEvent' data-filter-button='dresses'
							data-link='.l-container' data-category='L3_20ss_masterpiece'
							data-label='hp_menu_dresses'>
							<figure class='u-imgAdjustBox l-navigation_icon' data-aspect-ratio='1:1'>
								<picture class='u-imgAdjustBox_inner l-navigation_iconInner'><img
										class='fr-img lazyload'
										src='https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-dress.svg'
										data-original='https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-dress.svg'
										alt='DRESS' data-expand='300'></picture>
							</figure><span class='u-only-pc'>DRESSES</span>
						</li>
						<li data-i ='5' class='l-navigation_item js-smoothScroll -roomwear js-trackEvent'
							data-filter-button='loungewear' data-link='.l-container' data-category='L3_20ss_masterpiece'
							data-label='hp_menu_loungwear'>
							<figure class='u-imgAdjustBox l-navigation_icon' data-aspect-ratio='1:1'>
								<picture class='u-imgAdjustBox_inner l-navigation_iconInner'><img
										class='fr-img lazyload'
										src='https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-roomwear.svg'
										data-original='https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-roomwear.svg'
										alt='ROOM WEAR' data-expand='300'></picture>
							</figure><span class='u-only-pc'>LOUNGEWEAR</span>
						</li>
						<li data-i ='6' class='l-navigation_item js-smoothScroll -inner js-trackEvent' data-filter-button='innerwear'
							data-link='.l-container' data-category='L3_20ss_masterpiece'
							data-label='hp_menu_innerwear'>
							<figure class='u-imgAdjustBox l-navigation_icon' data-aspect-ratio='1:1'>
								<picture class='u-imgAdjustBox_inner l-navigation_iconInner'><img
										class='fr-img lazyload'
										src='https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-inner.svg'
										data-original='https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-inner.svg'
										alt='INNER' data-expand='300'></picture>
							</figure><span class='u-only-pc'>INNERWEAR</span>
						</li>
						<li data-i ='7' class='l-navigation_item js-smoothScroll -goods js-trackEvent' data-filter-button='accessories'
							data-link='.l-container' data-category='L3_20ss_masterpiece'
							data-label='hp_menu_accessories'>
							<figure class='u-imgAdjustBox l-navigation_icon' data-aspect-ratio='1:1'>
								<picture class='u-imgAdjustBox_inner l-navigation_iconInner'><img
										class='fr-img lazyload'
										src='https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-goods.svg'
										data-original='https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-goods.svg'
										alt='GOODS' data-expand='300'></picture>
							</figure><span class='u-only-pc'>ACCESSORIES</span>
						</li>
						<li data-i ='8' class='l-navigation_item js-smoothScroll -baby js-trackEvent' data-filter-button='baby'
							data-link='.l-container' data-category='L3_20ss_masterpiece'
							data-label='hp_menu_baby'>
							<figure class='u-imgAdjustBox l-navigation_icon' data-aspect-ratio='1:1'>
								<picture class='u-imgAdjustBox_inner l-navigation_iconInner'><img
										class='fr-img lazyload'
										src='https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-baby.svg'
										data-original='https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-baby.svg'
										alt='BABY' data-expand='300'></picture>
							</figure><span class='u-only-pc'>BABY</span>
						</li>
					</ul>
				</div>

		`
		$('.l-navigation').html(menu)
	}

	var homepageProductList = () => {
		var categoryProductItems = masterpieceData
			.filter(product => state.filter === product.category.toLowerCase() || state.filter === 'all')
			.map((product, i) => {
				var productTile = `
				<section class='c-contentsCard -no-${i} product-fadeIn' aria-hidden='false'>
					<a class='js-trackEvent' 
					    data-label='hp_tile_${product.productName.replace(/ /g, '_').toLowerCase()}' 
						href='${state.siteUrl + product.url}'
						data-category='${product.category}' data-product='${product.productName}'
						>
						<figure class='u-imgAdjustBox' data-aspect-ratio='1:1'>
							<picture class='u-imgAdjustBox_inner'>
								<div class='lds-ellipsis loading-img'><div></div><div></div><div></div><div></div></div>
								<img class='fr-img lazyload'
		 							src="${state.defaultImg}"
									data-original="${product.image}"
									alt="${product.title}" data-expand='300'>
							</picture>
						</figure>
						<div class='c-contentsCard_inner'>
							<h2 class='c-contentsCard_title'>${product.title}</h2>
							<ul class='c-label -inCard'>
								<li class='c-label_item -category'>${product.category}</li>
								<li class='c-label_item -name'>${product.productName}</li>
							</ul>
						</div>
					</a>
				</section>`;
				return productTile
			})

		var productListContainer =
			`<div class='c-contentsCardGroup_body'>
					<p class='c-contentsCardGroup_head'  aria-hidden='false'>
						<span class='c-contentsCardGroup_headInner'>
							${state.filter}
						</span>
					</p>
					${categoryProductItems && categoryProductItems.length > 0 ? 
						categoryProductItems.join('')
					:
						`<div class='c-contentsCard -comingSoon product-fadeIn' >Coming soon...</div>`
					}
				</div>`
		$('.c-contentsCardGroup').html(productListContainer)

	}

	var homepage = () => {
		var homepageComponent = `
			<div class='hp-hero-container'>
				<div class='hp-bg-hero'></div>
				<div class='o-hero' >
					<h1 class='o-hero_title'>
						<figure class='u-imgAdjustBox' data-sp-aspect-ratio='452:126' data-pc-aspect-ratio='960:70'>
							<picture class='u-imgAdjustBox_inner'>
								<p class='main-hero-text'>UNIQLO MASTERPIECE<p>
							</picture>
						</figure>
					</h1>
				</div>
				<div class='o-hero-lead'>
					<div class='o-hero-text'>
						<p>What is a truly exceptional piece of clothing?</p>
						<p>It’s simple, functional, has its own sense of beauty,
						and evolves for the people who wear it.<p>
						<p>The material, the needlework, the silhouette, the color scheme…
						evolving with the people, the nature, and the everyday life.</p>
						<p>Embracing the spirit of Japanese manufacturing,
						paying close attention to every single detail.</p>
						<p>We do this so that each and every piece of clothing
						will be an eternal masterpiece
						for those who live in the present.</p>
						<p style="margin: 0">There is no end to clothes-making at UNIQLO.</p>
						<p class='bold'>UNIQLO MASTERPIECE</p>				
					</div>
				</div>
			</div>

			<div class='l-wrapper'>
				<div class='l-container -topLayer'>
					<nav class='l-navigation'>
					</nav>
					<div class='c-contentsCardGroup'>
					</div>
				</div>
				<div class='c-bannerGroup'style=''></div>
			</div>
		`
		if (!state.loading) {
			$('.main').css('opacity', '1');
		}
		$('.main').html(homepageComponent)
		homepageMenu();
		homepageProductList()

	}


	// Product Components

	var productInfo = () => {
		var product = state.contentSelected;
		var imageContainer = [`
			<figure class='u-imgAdjustBox' data-aspect-ratio='1:1'>
				<picture class='u-imgAdjustBox_inner'>
					<img
						class='fr-img ls-is-cached lazyload' src="${state.defaultImg}"
						data-original="${product.image}" alt="${product.productName}" data-expand='300'>
				</picture>
			</figure>`];
		if (product.productHeroImgs.length > 0) {

			for (var i = 0; i < product.productHeroImgs.length; i++) {

				if (product.productHeroImgs[i].length > 0) {
					var image =
						`<figure class='u-imgAdjustBox' data-aspect-ratio='1:1'>
						<picture class='u-imgAdjustBox_inner'>
							<img
								class='fr-img ls-is-cached lazyload' src="${state.defaultImg}"
								data-original="${product.productHeroImgs[i]}" alt="${product.productName}" data-expand='300'>
						</picture>
					</figure>`
					imageContainer.push(image)
				}

			}
		}


		var content = `
				<h1 class='c-contentsPanel_title'>
					${product.title.replace('&apos;',"''")}
				</h1>
				<p class='c-contentsPanel_text'>
					${product.productCopy.replace("&apos;","'")}
				</p>
				<ul class='c-label -inPanel'>
					<li class='c-label_item -category'>
						${product.category}
					</li>
					${ product.gender && product.gender.length > 0 ?
						Object.keys(product.gender).map((i) => {
							return (
								`<li class='c-label_item -gender' data-i=${i}>
									${product.gender[i]}
								</li>`)
							}).join('')
						: null
					}
					<li class='c-label_item -name'>
						${product.productName}
					</li>
				</ul>`;

		$('.c-contentsPanel .c-contentsPanel_image').html(imageContainer.join(''));
		$('.c-contentsPanel .c-contentsPanel_inner').html(content);

		if (product.productHeroImgs.length > 0) {


			if (state.width < 768) {
				jQuery.ajax({
					url: '//cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.6.0/slick.min.js',
					dataType: 'script',
					success: function () {
						//put in script
						$('.product-container .c-contentsPanel .c-contentsPanel_image').slick({
							dots: false,
							arrows: true,
						})
					},
					async: true
				});

			} else {
				$('.product-container .c-contentsPanel .c-contentsPanel_image').slick({
					dots: false,
					arrows: true,
				})
			}
		}


	}

	var relatedProducts = () => {
		var product = state.contentSelected;
		var relatedProductsComponent =
			`	<h2 class='c-shoulderSection_title'>
				${product.relatedProducts.title.replace('&apos;',"''")}
			</h2>
			<ul class='c-productButtonGroup'>
			</ul>
		`;

		$('.c-shoulderSection_content').html(relatedProductsComponent);

		if (product.relatedProducts && product.relatedProducts.productList.length > 0) {
			for (var i in product.relatedProducts.productList) {
				getRelatedProduct(product.relatedProducts.productList[i], i, product.productName);
				getProductData(product.relatedProducts.productList[i].sku, i);
			}
		}
	}


	var getRelatedProduct = (data, i, productName) => {
		var productNameReplace = productName.replace(/ /g, '_').toLowerCase();
		var position = parseInt(i) + 1;
		var productComponent = `
			<li class='c-productButtonGroup_item'>
				<a class='c-productButton js-trackEvent'
					 data-label='article_${productNameReplace}_productTile_${position}_${data.sku}'
					href='#'>
					<figure class='u-imgAdjustBox' data-aspect-ratio='1:1'>
						<picture class='u-imgAdjustBox_inner'>
								<img class='fr-img lazyloaded'
								src="${state.defaultImg}"
								data-original="${state.defaultImg}"
								alt='' data-expand='300'>
						</picture>
					</figure>
					<div class='c-productButton_inner'>
						<p class='c-productButton_gender'>
							${data.gender}
						</p>
						<h3 class='c-productButton_title'>
						
						</h3>
						<p class='c-productButton_viewProduct'>
							View product
						</p>
					</div>
				</a>
				<a class='c-linkButton js-trackEvent' href='${data.ctaUrl}' 
			
				data-label='article_${productNameReplace}_productCta_${position}'>${data.ctaCopy}</a>
			</li>
			`
		$('.c-productButtonGroup').append(productComponent);


	}

	var getProductData = (sku, i) => {
		var urlPrefix = 'https://www.uniqlo.com/';
		if (window.location.href.includes('staging')) {
			urlPrefix = 'https://staging-na-uniqlo.demandware.net'
		}
		if (window.location.href.includes('development')) {
			urlPrefix = 'https://development-na-uniqlo.demandware.net'
		}
		if (sku) {
			$.ajax({
				url: urlPrefix +
					'/on/demandware.store/Sites-UniqloUS-Site/default/Product-HitTile?pid=' +
					sku,
				i: i,
				sku: sku,
				success: function (pData) {
					if (pData.length === 0) {
						$(`.c-productButtonGroup_item:eq(${i}) `).hide();

						return;
					}
					var price = $(pData).children('.product-tile-info')
						.children(
							'.product-pricing')
						.children(
							'.product-sales-price').html();

					if (price && price.includes('/')) {
						$('.c-productButtonGroup_item:eq(' + i + ')').hide();
						return;
					}
					var productImage = $(pData).children(
						'.product-tile-info').children(
						'.product-image').children('.thumb-link').children('img').attr('src');

					var swatches = $(pData).children(
						'.product-swatches').html();


					if ($(swatches).length === 0) {
						$(`.c-productButtonGroup_item:eq(${i}) `).hide();
						return;
					}
					var productTitle = $(pData).children('.product-tile-info').children(
						'.product-name').html();


					var productLink = $(pData).children('.product-tile-info').children(
						'.product-name').children(
						'.name-link').attr('href');


					$(`.c-productButtonGroup_item:eq(${i}) .c-productButton`).attr('href',
						productLink)

					$(`.c-productButtonGroup_item:eq(${i}) .c-productButton_title`).html(
						productTitle)
					$(`.c-productButtonGroup_item:eq(${i}) .u-imgAdjustBox_inner img`).attr('src',
						productImage)
					$(`.c-productButtonGroup_item:eq(${i}) .u-imgAdjustBox_inner img`).attr(
						'data-src',
						productImage)

				}
			})



		}
	}



	var topArticles = () => {
		var articles = masterpieceData
			.filter(product => product.title.toLowerCase() !== state.contentSelected.title.toLowerCase() &&
				product.category.toLowerCase() === state.contentSelected.category.toLowerCase())
			.map((product, i) => {

				var productName = product.productName.replace('&apos;', "''");
				return (
					`<li class='c-relatedButtonGroup_item'>
						<a class='c-relatedButton js-trackEvent'
							data-category='${product.category}'
							data-product='${product.productName}'
							data-label='article_relatedArticle_${productName.replace(/ /g, '_').toLowerCase()}'
							href='${state.siteUrl + product.url}'>
							<figure class='u-imgAdjustBox' data-aspect-ratio='1:1'>
								<picture class='u-imgAdjustBox_inner'>
								
										<img
										class='fr-img lazyload'
										src="${state.defaultImg}"
										data-original="${product.image}"
										alt="${productName}" data-expand='300'>
								</picture>
							</figure>
							<div>
								<h3 class='c-relatedButton_title'>
									${product.title.replace('&apos;',"''")}
								</h3>
								<p class='c-relatedButton_name'>
									${product.productName}
								</p>
							</div>
						</a>
					</li>
					`
				)
			})
		if (articles.length > 0) {
			var articleComponent = `
					<h2 class='l-relatedAside_title'>
						Tops Articles
					</h2>
					<ul class='c-relatedButtonGroup'>${articles.length > 8 ? articles.splice(0,8).join(''): articles.join('')}</ul>
			`
			$('.l-relatedAside').html(articleComponent)
		}
	}

	var productPage = () => {

		var productPageComponent =
			`<div class='l-container product-container'>
				<article class='c-contents'>
					<div class='c-contentsPanel'>
						<div class='c-contentsPanel_image'></div>
						<div class='c-contentsPanel_inner'></div>
					</div>
					<section class='c-shoulderSection'>
						<div class='c-shoulderSection_content'></div>
					</section>
				</article>
				<aside class='l-relatedAside'>
				</aside>
				<a class='c-topPageButton js-trackEvent' href='${state.siteUrl}'
					data-label='article_cta_back_to_masterpiece'>
					<figure class='u-imgAdjustBox' data-aspect-ratio='322:119'>
						<div class='u-imgAdjustBox_inner'>
								<img
								class='fr-img lazyloaded'
								src='https://image.uniqlo.com//UQ/ST3/us/imagesother/home/uniqlomasterpiece-horizontal.png'
								data-original='https://image.uniqlo.com//UQ/ST3/us/imagesother/home/uniqlomasterpiece-horizontal.png
								alt='UNIQLO MASTERPIECE BACK TO TOP' data-expand='300'>
								<p>BACK TO TOP</p>
								<div class='arrow-container'><div class='arrow long-arrow-left'></div></div>

						</div>
					</figure>
				</a>
			</div>`


		if (!state.loading) {
			console.log('loaded')
			$('.main').css('opacity', '1');

		}

		if (state.contentSelected) {
			$('.main').html(productPageComponent);
			productInfo();
			relatedProducts();
			topArticles();

		} else {
			console.log(state.loading)
			errorPage()
		}
	}


	function initMasterpiece() {
		state.currentUrl = window.location.href;
		var urlParams = new URLSearchParams(window.location.search);
		var product = urlParams.get('product') ? urlParams.get('product').split('-').join(' ').replace('&apos;', "''")
			.replace('_', '-')
			.toLowerCase() :
			null;

		var category = urlParams.get('category') ? urlParams.get('category').split('-').join(' ').replace('&apos;', "''")
			.replace('_', '-')
			.toLowerCase() :
			null;


		var hpCategory = window.location.hash.toLowerCase().replace('#', '');

		if ((product && category) || state.contentSelected) {
			if (state.contentSelected) {
				product = state.contentSelected.productName.toLowerCase();
				category = state.contentSelected.category.toLowerCase()
			}
			var findProductPageData = masterpieceData.filter((data) => {
				return data.category.toLowerCase() === category && data.productName.toLowerCase() ===
					product
			})
			state.loading = false

			if (findProductPageData && findProductPageData.length > 0) {
				state.contentSelected = findProductPageData[0];
				productPage();
				if ($('.product-crumb').length === 0) {
					var titleReplace = state.contentSelected.title.replace('&apos;', "''")
					$('.fr-breadcrumbs_inner').append(
						`<li class='fr-breadcrumbs_item product-crumb js-trackEvent' data-label='breadcrumb_${titleReplace.replace(/ /g, '_').toLowerCase()}'>${titleReplace}</li>`
					)
				}
				$('.lazyload').lazyload();

			} else {
				state.contentSelected = null;
				$('.main').css('opacity', '1');
				errorPage()
			}

		} else {
			state.loading = false;
			homepage();
			if (hpCategory) {
				var findProductPageData = masterpieceData.filter((data) => {
					return data.category.toLowerCase() === hpCategory
				})

				if (findProductPageData && findProductPageData.length > 0) {
					state.filter = hpCategory;
					$('.l-navigation_item.is-active').removeClass('is-active');
					$(`.l-navigation_item[data-filter-button~='${hpCategory}'`).addClass('is-active');
					homepageProductList();
				}
			}

			$('.lazyload').lazyload();

		}
	}

	// Init App
	$(document).ready(() => {
		$('.main').css('opacity', '0')
		if (state.width < 768) {
			setTimeout(() => {
				initMasterpiece();
			}, 500)
		} else {
			initMasterpiece()
		}
	})

	$(document).on('click', '.js-trackEvent', function (e) {
		var dataset = e.currentTarget.dataset;
		var product = dataset.product;
		var category = dataset.category;
		var filter = dataset.filterButton;

		$(window).resize(function () {
			state.width = $(this).width()
		});
		if (product && category) {
			var findProductPageData = masterpieceData.filter((data) => {
				return data.category.toLowerCase() === category.toLowerCase() && data.productName
					.toLowerCase() === product.toLowerCase()
			})

			if (findProductPageData && findProductPageData.length > 0) {
				state.contentSelected = findProductPageData[0]
			}

			if (state.width < 768) {

				setTimeout(() => {
					initMasterpiece();
					$('html, body').animate({
						scrollTop: 0
					}, 0)
				}, 500)
			}
		} else if (filter) {
			state.filter = filter;
			var i = e.currentTarget.dataset.i;
			$('.l-navigation_item.is-active').removeClass('is-active');
			$(`.l-navigation_item:eq(${i})`).addClass('is-active')
			homepageProductList();
			$('.lazyload').lazyload();
			$('html, body').animate({
				scrollTop: $('.c-contentsCardGroup').offset().top
			}, 0, function () {
				window.location.hash = filter ? filter : '';
			});
		} else {
			if (state.width < 768) {
				$('.main').css('opacity', '0')
				setTimeout(() => {
					homepage();
					$('.lazyload').lazyload();
					$('html, body').animate({
						scrollTop: $('.c-contentsCardGroup').offset().top
					}, 0, function () {
						window.location.hash = filter;
					});
				}, 500)
			}
		}
		masterpieceGA(e);
	})




	$(window).resize(function () {
		state.width = $(this).width()
	});

	$(window).scroll(() => {
		if ($('.l-navigation_wrapper').length > 0) {
			var t = document.querySelector('.l-navigation_body');
			var e = document.documentElement.scrollTop || document.body.scrollTop;
			e > document.querySelector('.l-navigation_wrapper').getBoundingClientRect().top + e ? t
				.setAttribute('data-navigation-position', 'fixed') : t.setAttribute(
					'data-navigation-position', 'default'),
				e > document.querySelector('.c-bannerGroup').getBoundingClientRect().top + e - t
				.clientHeight ? t.classList.add('is-absolute') : t.classList.remove('is-absolute');


			if (e > document.querySelector('.l-wrapper').getBoundingClientRect().top + e - t
				.clientHeight) {
				$('.hp-bg-hero').css({
					'position': 'absolute',
					'bottom': '0',
					'top': ''
				})

			} else {

				if (state.width > 768) {
					$('.hp-bg-hero').css({
						'position': 'fixed',
						'top': 280 - e > 0 ? 280 - e : 0,
						'bottom': ''
					})
				} else {
					$('.hp-bg-hero').css({
						'position': 'fixed',
						'top': 115 - e > 0 ? 115 - e : 0,
						'bottom': ''
					})
				}

			}

		}
	})




	// GA TAG
	var masterpieceGA = (e) => {

		if (!(e.currentTarget.dataset)) {
			event.preventDefault();
		}

		var value = e.currentTarget.dataset && e.currentTarget.dataset.label ? e.currentTarget.dataset.label : e;
		var urlPrefix = 'https://www.uniqlo.com/us/en';

		if (window.location.href.includes('staging')) {
			urlPrefix = 'https://staging-na-uniqlo.demandware.net/s/UniqloUS'
		}

		if (window.location.href.includes('development')) {
			urlPrefix = 'https://development-na-uniqlo.demandware.net/s/UniqloUS'
		}

		var path = state.currentUrl.replace(urlPrefix, '');

		dataLayer.push({
			'event': 'eventTracking',
			'eventCategory': 'category page',
			'eventAction': `clicked category: ${path}`,
			'eventLabel': `l3_${value}`
		})
	}

</script>

<script>
	(function ($, window, document, undefined) {
		var $window = $(window);

		$.fn.lazyload = function (options) {
			var elements = this;
			var $container;
			var settings = {
				threshold: 0,
				failure_limit: 0,
				event: "scroll",
				effect: "show",
				container: window,
				data_attribute: "original",
				skip_invisible: false,
				appear: null,
				load: null,
				placeholder: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"
			};

			function update() {
				var counter = 0;

				elements.each(function () {
					var $this = $(this);
					if (settings.skip_invisible && !$this.is(":visible")) {
						return;
					}
					if ($.abovethetop(this, settings) ||
						$.leftofbegin(this, settings)) {
						/* Nothing. */
					} else if (!$.belowthefold(this, settings) &&
						!$.rightoffold(this, settings)) {
						$this.trigger("appear");
						/* if we found an image we'll load, reset the counter */
						counter = 0;
					} else {
						if (++counter > settings.failure_limit) {
							return false;
						}
					}
				});

			}

			if (options) {
				/* Maintain BC for a couple of versions. */
				if (undefined !== options.failurelimit) {
					options.failure_limit = options.failurelimit;
					delete options.failurelimit;
				}
				if (undefined !== options.effectspeed) {
					options.effect_speed = options.effectspeed;
					delete options.effectspeed;
				}

				$.extend(settings, options);
			}

			/* Cache container as jQuery as object. */
			$container = (settings.container === undefined ||
				settings.container === window) ? $window : $(settings.container);

			/* Fire one scroll event per scroll. Not one scroll event per image. */
			if (0 === settings.event.indexOf("scroll")) {
				$container.bind(settings.event, function () {
					return update();
				});
			}

			this.each(function () {
				var self = this;
				var $self = $(self);

				self.loaded = false;

				/* If no src attribute given use data:uri. */
				if ($self.attr("src") === undefined || $self.attr("src") === false) {
					if ($self.is("img")) {
						$self.attr("src", settings.placeholder);
					}
				}

				/* When appear is triggered load original image. */
				$self.one("appear", function () {
					if (!this.loaded) {
						if (settings.appear) {
							var elements_left = elements.length;
							settings.appear.call(self, elements_left, settings);
						}
						$("<img />")
							.bind("load", function () {
								var original = $self.attr("data-" + settings.data_attribute);
								$self.hide();
								if ($self.is("img")) {
									$self.attr("src", original);
									console.log($self.prev('.loading-img'))
									$self.prev('.loading-img').hide();
									$self.addClass("lazyloaded");
									$self.removeClass("lazyload");
								} else {
									$self.css("background-image", "url('" + original + "')");
								}
								$self[settings.effect](settings.effect_speed);

								self.loaded = true;

								/* Remove image from array so it is not looped next time. */
								var temp = $.grep(elements, function (element) {
									return !element.loaded;
								});
								elements = $(temp);

								if (settings.load) {
									var elements_left = elements.length;
									settings.load.call(self, elements_left, settings);
								}
							})
							.attr("src", $self.attr("data-" + settings.data_attribute));
					}
				});

				/* When wanted event is triggered load original image */
				/* by triggering appear.                              */
				if (0 !== settings.event.indexOf("scroll")) {
					$self.bind(settings.event, function () {
						if (!self.loaded) {
							$self.trigger("appear");
						}
					});
				}
			});

			/* Check if something appears when window is resized. */
			$window.bind("resize", function () {
				update();
			});

			/* With IOS5 force loading images when navigating with back button. */
			/* Non optimal workaround. */
			if ((/(?:iphone|ipod|ipad).*os 5/gi).test(navigator.appVersion)) {
				$window.bind("pageshow", function (event) {
					if (event.originalEvent && event.originalEvent.persisted) {
						elements.each(function () {
							$(this).trigger("appear");
						});
					}
				});
			}

			/* Force initial check if images should appear. */
			$(document).ready(function () {
				update();
			});

			return this;
		};

		/* Convenience methods in jQuery namespace.           */
		/* Use as  $.belowthefold(element, {threshold : 100, container : window}) */

		$.belowthefold = function (element, settings) {
			var fold;

			if (settings.container === undefined || settings.container === window) {
				fold = (window.innerHeight ? window.innerHeight : $window.height()) + $window.scrollTop();
			} else {
				fold = $(settings.container).offset().top + $(settings.container).height();
			}

			return fold <= $(element).offset().top - settings.threshold;
		};

		$.rightoffold = function (element, settings) {
			var fold;

			if (settings.container === undefined || settings.container === window) {
				fold = $window.width() + $window.scrollLeft();
			} else {
				fold = $(settings.container).offset().left + $(settings.container).width();
			}

			return fold <= $(element).offset().left - settings.threshold;
		};

		$.abovethetop = function (element, settings) {
			var fold;

			if (settings.container === undefined || settings.container === window) {
				fold = $window.scrollTop();
			} else {
				fold = $(settings.container).offset().top;
			}

			return fold >= $(element).offset().top + settings.threshold + $(element).height();
		};

		$.leftofbegin = function (element, settings) {
			var fold;

			if (settings.container === undefined || settings.container === window) {
				fold = $window.scrollLeft();
			} else {
				fold = $(settings.container).offset().left;
			}

			return fold >= $(element).offset().left + settings.threshold + $(element).width();
		};

		$.inviewport = function (element, settings) {
			return !$.rightoffold(element, settings) && !$.leftofbegin(element, settings) &&
				!$.belowthefold(element, settings) && !$.abovethetop(element, settings);
		};

		/* Custom selectors for your convenience.   */
		/* Use as $("img:below-the-fold").something() or */
		/* $("img").filter(":below-the-fold").something() which is faster */

		$.extend($.expr[":"], {
			"below-the-fold": function (a) {
				return $.belowthefold(a, {
					threshold: 0
				});
			},
			"above-the-top": function (a) {
				return !$.belowthefold(a, {
					threshold: 0
				});
			},
			"right-of-screen": function (a) {
				return $.rightoffold(a, {
					threshold: 0
				});
			},
			"left-of-screen": function (a) {
				return !$.rightoffold(a, {
					threshold: 0
				});
			},
			"in-viewport": function (a) {
				return $.inviewport(a, {
					threshold: 0
				});
			},
			/* Maintain BC for couple of versions. */
			"above-the-fold": function (a) {
				return !$.belowthefold(a, {
					threshold: 0
				});
			},
			"right-of-fold": function (a) {
				return $.rightoffold(a, {
					threshold: 0
				});
			},
			"left-of-fold": function (a) {
				return !$.rightoffold(a, {
					threshold: 0
				});
			}
		});

	})(jQuery, window, document);

</script>


<!-- endHTMLinject -->
