<div class="wrapper">
	<main class="main">
		<div class="l-container">
			<article class="c-contents">

				<!-- Content Header -->
				<div class="c-contentsPanel">
					<div class="c-contentsPanel_image">
						<figure class="u-imgAdjustBox" data-aspect-ratio="1:1">
							<picture class="u-imgAdjustBox_inner">
								<source data-srcset="${product.image}" type="image/jpeg" srcset="${product.image}"><img
									class="fr-img ls-is-cached lazyloaded" src="${product.image}"
									data-src="${product.image}" alt="Comfort jacket" data-expand="300">
							</picture>
						</figure>
					</div>
					<div class="c-contentsPanel_inner">
						<h1 class="c-contentsPanel_title">
							${product.title}
						</h1>
						<p class="c-contentsPanel_text">
							${product.productCopy}
						</p>
						<ul class="c-label -inPanel">
							<li class="c-label_item -category">
								${product.category}
							</li>
							${ product.gender && product.gender.length > 0 ?
							Object.keys(product.gender).map((gender, i) => {
							return (
							<li class="c-label_item -gender" data-i=${i}>
								gender
							</li>)
							})
							: null
							}

							<li class="c-label_item -name">
								${product.productName}
							</li>
						</ul>
					</div>
				</div>

				<!-- Related Products -->
				<section class="c-shoulderSection">
					<h2 class="c-shoulderSection_title">
						${product.relatedProducts.title}
					</h2>
					<ul class="c-productButtonGroup">
						<li class="c-productButtonGroup_item">
							<a class="c-productButton js-trackEvent"
								data-category="L3_20ss_masterpiece_comfort_jacket_details_page" data-label="L4_425035"
								href="${product.productUrl}">
								<figure class="u-imgAdjustBox" data-aspect-ratio="1:1">
									<picture class="u-imgAdjustBox_inner">
										<img class="fr-img lazyloaded"
											src="/jp/ja/contents/feature/masterpiece/img/product-2-1.jpg?20200306"
											data-src="/jp/ja/contents/feature/masterpiece/img/product-2-1.jpg?20200306"
											alt="Comfort jacket" data-expand="300">
									</picture>
								</figure>
								<div class="c-productButton_inner">
									<p class="c-productButton_gender">
										<font style="vertical-align: inherit;">
											<font style="vertical-align: inherit;">MEN</font>
										</font>
									</p>
									<h3 class="c-productButton_title">
										<font style="vertical-align: inherit;">
											<font style="vertical-align: inherit;">Comfort jacket</font>
										</font>
									</h3>
									<p class="c-productButton_viewProduct">
										<font style="vertical-align: inherit;">
											<font style="vertical-align: inherit;">View product</font>
										</font>
									</p>
								</div>
							</a>
						</li>
					</ul>
					<a class="c-linkButton js-trackEvent" href="https://www.uniqlo.com/jp/store/feature/uq/jacket/men/"
						data-category="L3_20ss_masterpiece_comfort_jacket_details_page" data-label="L3_ms_jacket">
						<font style="vertical-align: inherit;">
							<font style="vertical-align: inherit;">See related products</font>
						</font>
					</a>
				</section>

			</article>

			<!-- Top Articles -->
			<aside class="l-relatedAside">
				<h2 class="l-relatedAside_title">
					<font style="vertical-align: inherit;">
						<font style="vertical-align: inherit;">Tops Articles
						</font>
					</font>
				</h2>
				<ul class="c-relatedButtonGroup">
					<li class="c-relatedButtonGroup_item"><a class="c-relatedButton js-trackEvent"
							data-category="L3_20ss_masterpiece_fine_cloth_shirt_details_page"
							data-label="L3_20ss_masterpiece_premium_linen_details_page"
							href="/jp/ja/contents/feature/masterpiece/001-premium-linen.html">
							<figure class="u-imgAdjustBox" data-aspect-ratio="1:1">
								<picture class="u-imgAdjustBox_inner">
									<source
										data-srcset="/jp/ja/contents/feature/masterpiece/img/image-1-1.webp?20200306"
										type="image/webp"
										srcset="/jp/ja/contents/feature/masterpiece/img/image-1-1.webp?20200306">
									<source data-srcset="/jp/ja/contents/feature/masterpiece/img/image-1-1.jpg?20200306"
										type="image/jpeg"
										srcset="/jp/ja/contents/feature/masterpiece/img/image-1-1.jpg?20200306"><img
										class="fr-img lazyloaded"
										src="/jp/ja/contents/feature/masterpiece/img/image-1-1.jpg?20200306"
										data-src="/jp/ja/contents/feature/masterpiece/img/image-1-1.jpg?20200306"
										alt="Premium linen shirt" data-expand="300">
								</picture>
							</figure>
							<div>
								<h3 class="c-relatedButton_title">
									<font style="vertical-align: inherit;">
										<font style="vertical-align: inherit;">Linen </font>
									</font><br>
									<font style="vertical-align: inherit;">
										<font style="vertical-align: inherit;">becomes a shirt with </font>
										<font style="vertical-align: inherit;">human eyes </font>
										<font style="vertical-align: inherit;">.</font>
									</font>
								</h3>
								<p class="c-relatedButton_name">
									<font style="vertical-align: inherit;">
										<font style="vertical-align: inherit;">Premium linen shirt</font>
									</font>
								</p>
							</div>
						</a>
					</li>

				</ul>
			</aside>


			<!-- Back to Top -->
			<a class="c-topPageButton js-trackEvent" href="/jp/ja/contents/feature/masterpiece/"
				data-category="L3_20ss_masterpiece_comfort_jacket_details_page" data-label="#">
				<figure class="u-imgAdjustBox" data-aspect-ratio="322:119">
					<picture class="u-imgAdjustBox_inner">
						<source data-srcset="/jp/ja/contents/feature/masterpiece/img/button-back-to-top.webp?20200306"
							type="image/webp"
							srcset="/jp/ja/contents/feature/masterpiece/img/button-back-to-top.webp?20200306">
						<source data-srcset="/jp/ja/contents/feature/masterpiece/img/button-back-to-top.png?20200306"
							type="image/png"
							srcset="/jp/ja/contents/feature/masterpiece/img/button-back-to-top.png?20200306"><img
							class="fr-img lazyloaded"
							src="/jp/ja/contents/feature/masterpiece/img/button-back-to-top.png?20200306"
							data-src="/jp/ja/contents/feature/masterpiece/img/button-back-to-top.png?20200306"
							alt="UNIQLO MASTERPIECE BACK TO TOP" data-expand="300">
					</picture>
				</figure>
			</a>

		</div>
	</main>
</div>




<script>
	var state = {
		loading: false,
		menuSelectedItem: '',
		filter: 'all',
		contentSelected: ''
	}

	var homepageHero = {
		imagePC: `http://175.41.241.98:8001/jp/ja/contents/feature/masterpiece/img/pc-background-hero.jpg`,
		imageMB: `http://175.41.241.98:8001/jp/ja/contents/feature/masterpiece/img/sp-background-hero.jpg`,
		copy: `home copy`
	}

	var masterpieceData = [{
			image: `http://175.41.241.98:8001/jp/ja/contents/feature/masterpiece/img/image-1-1.jpg?20200306`,
			title: `Linen Page`,
			productName: `Premium Linen Shirt`,
			gender: [`Women`, `Men`],
			category: `Tops`,
			url: `?product=linen-page?category=tops`,
			productCopy: `Linen called the oldest fiber of mankind. Linen grown mainly in Western Europe, especially in Northern France, is known for its unique softness. In the linen there is a lump of thread called NEP. It's an important personality, but too much can make it look ugly. To make shirts that are easy to wear and clean. UNIQLO has a lot of work. Seasoned tweezers and human eyes. Be patient with simple tools. Do not hesitate. Only the extra nep disappears, leaving an elegant texture.`,
			relatedProducts: {
				title: `One by one, texture prepared by human hands`,
				productList: [{
						id: '123',
						image: `http://175.41.241.98:8001/jp/ja/contents/feature/masterpiece/img/product-1-1.webp?20200306`,
						gender: `Women`,
						productName: `Premium linen skipper shirt`,
						productUrl: `https://www.uniqlo.com/jp/store/goods/426232-30`,
						ctaUrl: `https://www.uniqlo.com/jp/store/feature/uq/longshirts/women/`,
						ctaCopy: `WOMEN related products`
					},
					{
						id: '123',
						image: `http://175.41.241.98:8001/jp/ja/contents/feature/masterpiece/img/product-1-1.webp?20200306`,
						gender: `Men`,
						productName: `Premium linen skipper shirt`,
						productUrl: `https://www.uniqlo.com/jp/store/goods/426232-30`,
						ctaUrl: `https://www.uniqlo.com/jp/store/feature/uq/longshirts/women/`,
						ctaCopy: `WOMEN related products`
					}
				]
			}
		},
		{
			image: `http://175.41.241.98:8001/jp/ja/contents/feature/masterpiece/img/image-1-1.jpg?20200306`,
			title: `Linen Page`,
			productName: `Premium Linen Shirt`,
			gender: [`Women`, `Men`],
			category: `Baby`,
			url: `?product=linen-page?category=tops`,
			productCopy: `Linen called the oldest fiber of mankind. Linen grown mainly in Western Europe, especially in Northern France, is known for its unique softness. In the linen there is a lump of thread called NEP. It's an important personality, but too much can make it look ugly. To make shirts that are easy to wear and clean. UNIQLO has a lot of work. Seasoned tweezers and human eyes. Be patient with simple tools. Do not hesitate. Only the extra nep disappears, leaving an elegant texture.`,
			relatedProducts: {
				title: `One by one, texture prepared by human hands`,
				productList: [{
						image: `http://175.41.241.98:8001/jp/ja/contents/feature/masterpiece/img/product-1-1.webp?20200306`,
						gender: `Women`,
						productName: `Premium linen skipper shirt`,
						productUrl: `https://www.uniqlo.com/jp/store/goods/426232-30`,
						ctaUrl: `https://www.uniqlo.com/jp/store/feature/uq/longshirts/women/`,
						ctaCopy: `WOMEN related products`
					},
					{
						image: `http://175.41.241.98:8001/jp/ja/contents/feature/masterpiece/img/product-1-1.webp?20200306`,
						gender: `Men`,
						productName: `Premium linen skipper shirt`,
						productUrl: `https://www.uniqlo.com/jp/store/goods/426232-30`,
						ctaUrl: `https://www.uniqlo.com/jp/store/feature/uq/longshirts/women/`,
						ctaCopy: `WOMEN related products`
					}
				]
			}
		},
		{
			image: `http://175.41.241.98:8001/jp/ja/contents/feature/masterpiece/img/image-1-1.jpg?20200306`,
			title: `Linen Page`,
			productName: `Premium Linen Shirt`,
			gender: [`Women`, `Men`],
			category: `Tops`,
			url: `?product=linen-page?category=bottoms`,
			productCopy: `Linen called the oldest fiber of mankind. Linen grown mainly in Western Europe, especially in Northern France, is known for its unique softness. In the linen there is a lump of thread called NEP. It's an important personality, but too much can make it look ugly. To make shirts that are easy to wear and clean. UNIQLO has a lot of work. Seasoned tweezers and human eyes. Be patient with simple tools. Do not hesitate. Only the extra nep disappears, leaving an elegant texture.`,
			relatedProducts: {
				title: `One by one, texture prepared by human hands`,
				productList: [{
						image: `http://175.41.241.98:8001/jp/ja/contents/feature/masterpiece/img/product-1-1.webp?20200306`,
						gender: `Women`,
						productName: `Premium linen skipper shirt`,
						productUrl: `https://www.uniqlo.com/jp/store/goods/426232-30`,
						ctaUrl: `https://www.uniqlo.com/jp/store/feature/uq/longshirts/women/`,
						ctaCopy: `WOMEN related products`
					},
					{
						image: `http://175.41.241.98:8001/jp/ja/contents/feature/masterpiece/img/product-1-1.webp?20200306`,
						gender: `Men`,
						productName: `Premium linen skipper shirt`,
						productUrl: `https://www.uniqlo.com/jp/store/goods/426232-30`,
						ctaUrl: `https://www.uniqlo.com/jp/store/feature/uq/longshirts/women/`,
						ctaCopy: `WOMEN related products`
					}
				]
			}
		}
	]



	//Homepage Components

	var hompageMenu = () => {
		var menu = `
		<nav class="l-navigation">
				<div class="l-navigation_head">
					<figure class="u-imgAdjustBox" data-sp-aspect-ratio="90:235" data-pc-aspect-ratio="172:45">
						<picture class="u-imgAdjustBox_inner">

							<img class="fr-img lazyloaded"
								src="http://175.41.241.98:8001/jp/ja/contents/feature/masterpiece/img/sp-navigation-logo.png?20200306"
								data-src="http://175.41.241.98:8001/jp/ja/contents/feature/masterpiece/img/sp-navigation-logo.png?20200306"
								alt="UNIQLO MASTERPIECE" data-expand="300">
						</picture>
					</figure>
				</div>

				<!-- Navigation -->
				<div class="l-navigation_wrapper">
					<ul class="l-navigation_body" data-navigation-position="default">
						<li  class="l-navigation_item js-smoothScroll is-active -all js-trackEvent"
							data-filter-button="all" data-link=".l-container" data-category="L3_20ss_masterpiece"
							data-label="L3_20ss_masterpiece_all_icon"><span>ALL</span>
						</li>
						<li class="l-navigation_item js-smoothScroll -outer js-trackEvent" data-filter-button="outer"
							data-link=".l-container" data-category="L3_20ss_masterpiece"
							data-label="L3_20ss_masterpiece_outer_icon">
							<figure class="u-imgAdjustBox l-navigation_icon" data-aspect-ratio="1:1">
								<picture class="u-imgAdjustBox_inner l-navigation_iconInner"><img
										class="fr-img lazyloaded"
										src="https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-outer.svg"
										data-src="https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-outer.svg"
										alt="OUTER" data-expand="300"></picture>
							</figure><span class="u-only-pc">OUTER</span>
						</li>
						<li class="l-navigation_item js-smoothScroll -tops js-trackEvent" data-filter-button="tops"
							data-link=".l-container" data-category="L3_20ss_masterpiece"
							data-label="L3_20ss_masterpiece_tops_icon">
							<figure class="u-imgAdjustBox l-navigation_icon" data-aspect-ratio="1:1">
								<picture class="u-imgAdjustBox_inner l-navigation_iconInner"><img
										class="fr-img lazyloaded"
										src="https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-tops.svg"
										data-src="https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-tops.svg"
										alt="TOPS" data-expand="300"></picture>
							</figure><span class="u-only-pc">TOPS</span>
						</li>
						<li class="l-navigation_item js-smoothScroll -bottoms js-trackEvent"
							data-filter-button="bottoms" data-link=".l-container" data-category="L3_20ss_masterpiece"
							data-label="L3_20ss_masterpiece_bottoms_icon">
							<figure class="u-imgAdjustBox l-navigation_icon" data-aspect-ratio="1:1">
								<picture class="u-imgAdjustBox_inner l-navigation_iconInner"><img
										class="fr-img lazyloaded"
										src="https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-bottoms.svg"
										data-src="https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-bottoms.svg"
										alt="BOTTOMS" data-expand="300"></picture>
							</figure><span class="u-only-pc">BOTTOMS</span>
						</li>
						<li class="l-navigation_item js-smoothScroll -dress js-trackEvent" data-filter-button="dress"
							data-link=".l-container" data-category="L3_20ss_masterpiece"
							data-label="L3_20ss_masterpiece_dress_icon">
							<figure class="u-imgAdjustBox l-navigation_icon" data-aspect-ratio="1:1">
								<picture class="u-imgAdjustBox_inner l-navigation_iconInner"><img
										class="fr-img lazyloaded"
										src="https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-dress.svg"
										data-src="https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-dress.svg"
										alt="DRESS" data-expand="300"></picture>
							</figure><span class="u-only-pc">DRESS</span>
						</li>
						<li class="l-navigation_item js-smoothScroll -roomwear js-trackEvent"
							data-filter-button="roomwear" data-link=".l-container" data-category="L3_20ss_masterpiece"
							data-label="L3_20ss_masterpiece_roomwear_icon">
							<figure class="u-imgAdjustBox l-navigation_icon" data-aspect-ratio="1:1">
								<picture class="u-imgAdjustBox_inner l-navigation_iconInner"><img
										class="fr-img lazyloaded"
										src="https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-roomwear.svg"
										data-src="https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-roomwear.svg"
										alt="ROOM WEAR" data-expand="300"></picture>
							</figure><span class="u-only-pc">ROOM WEAR</span>
						</li>
						<li class="l-navigation_item js-smoothScroll -inner js-trackEvent" data-filter-button="inner"
							data-link=".l-container" data-category="L3_20ss_masterpiece"
							data-label="L3_20ss_masterpiece_inner_icon">
							<figure class="u-imgAdjustBox l-navigation_icon" data-aspect-ratio="1:1">
								<picture class="u-imgAdjustBox_inner l-navigation_iconInner"><img
										class="fr-img lazyloaded"
										src="https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-inner.svg"
										data-src="https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-inner.svg"
										alt="INNER" data-expand="300"></picture>
							</figure><span class="u-only-pc">INNER</span>
						</li>
						<li class="l-navigation_item js-smoothScroll -goods js-trackEvent" data-filter-button="goods"
							data-link=".l-container" data-category="L3_20ss_masterpiece"
							data-label="L3_20ss_masterpiece_goods_icon">
							<figure class="u-imgAdjustBox l-navigation_icon" data-aspect-ratio="1:1">
								<picture class="u-imgAdjustBox_inner l-navigation_iconInner"><img
										class="fr-img lazyloaded"
										src="https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-goods.svg"
										data-src="https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-goods.svg"
										alt="GOODS" data-expand="300"></picture>
							</figure><span class="u-only-pc">GOODS</span>
						</li>
						<li class="l-navigation_item js-smoothScroll -baby js-trackEvent" data-filter-button="baby"
							data-link=".l-container" data-category="L3_20ss_masterpiece"
							data-label="L3_20ss_masterpiece_baby_icon">
							<figure class="u-imgAdjustBox l-navigation_icon" data-aspect-ratio="1:1">
								<picture class="u-imgAdjustBox_inner l-navigation_iconInner"><img
										class="fr-img lazyloaded"
										src="https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-baby.svg"
										data-src="https://image.uniqlo.com//UQ/ST3/us/imagesother/featurepages/HighQuality/icon-baby.svg"
										alt="BABY" data-expand="300"></picture>
							</figure><span class="u-only-pc">BABY</span>
						</li>
					</ul>
				</div>

			</nav>
		`
		return menu;
	}

	var homepageProductList = () => {
		console.log('selected category', state)

		var categoryProductItems = masterpieceData
			.filter(product => state.filter === product.category.toLowerCase() || state.filter === 'all')
			.map((product, i) => {
				let productTile = `
				<section class="c-contentsCard -no-${i}" data-filter-panel="tops" aria-hidden="false"><a
						class="js-trackEvent" data-category="L3_20ss_masterpiece"
						data-label="${'gatag'}"
						href="${product.url}">
						<figure class="u-imgAdjustBox" data-aspect-ratio="1:1">
							<picture class="u-imgAdjustBox_inner">
								<img class="fr-img lazyloaded"
									src="${product.image}"
									data-src="${product.image}"
									alt="${product.title}" data-expand="300">
							</picture>
						</figure>
						<div class="c-contentsCard_inner">
							<h2 class="c-contentsCard_title">${product.title}</h2>
							<ul class="c-label -inCard">
								<li class="c-label_item -category">${product.category}</li>
								<li class="c-label_item -name">${product.productName}</li>
							</ul>
						</div>
					</a>
				</section>
			`

				return productTile


			})

		var productListContainer =
			`
				<div class="c-contentsCardGroup_body">
					${categoryProductItems.length > 0 ? 
						categoryProductItems.join('')
						
					:
						'<div class="c-contentsCard -comingSoon" >Coming soon...</div>'
					}
				</div>
			`
		setTimeout(() => {
			$('.c-contentsCardGroup').html(productListContainer)
		}, 500)

	}

	var homepage = () => {
		console.log(`home`);
		var homepageComponent = `
			<div class="o-hero">
				<h1 class="o-hero_title">
					<figure class="u-imgAdjustBox" data-sp-aspect-ratio="452:126" data-pc-aspect-ratio="960:70">
						<picture class="u-imgAdjustBox_inner">
							<source
								data-srcset="${homepageHero.imagePC}"
								media="(min-width: 813px)" type="image/png"
								srcset="${homepageHero.imagePC}">
							<source
								data-srcset="${homepageHero.imageMB}"
								type="image/png"
								srcset="${homepageHero.imageMB}">
							<img class="fr-img lazyloaded"
								src="${homepageHero.imageMB}"
								data-src="http://175.41.241.98:8001/jp/ja/contents/feature/masterpiece/img/sp-hero-logo.png?20200306"
								alt="UNIQLO MASTERPIECE" data-expand="300">
						</picture>
					</figure>
				</h1>
			</div>
			<p class="a-lead">
				${homepageHero.copy}
			</p>
			<div class="l-container -topLayer">
				${hompageMenu()}
				<div class="c-contentsCardGroup">
					${homepageProductList()}
				</div>
			</div>
		`

		return homepageComponent;

	}


	// Product Components

	var productInfo = () => {
		var product = masterpieceData[0]
		var image = `
				<figure class="u-imgAdjustBox" data-aspect-ratio="1:1">
					<picture class="u-imgAdjustBox_inner">
						<source data-srcset="${product.image}" type="image/jpeg" srcset="${product.image}"><img
							class="fr-img ls-is-cached lazyloaded" src="${product.image}"
							data-src="${product.image}" alt="Comfort jacket" data-expand="300">
					</picture>
				</figure>`;

		var content = `
				<h1 class="c-contentsPanel_title">
					${product.title}
				</h1>
				<p class="c-contentsPanel_text">
					${product.productCopy}
				</p>
				<ul class="c-label -inPanel">
					<li class="c-label_item -category">
						${product.category}
					</li>
					${ product.gender && product.gender.length > 0 ?
						Object.keys(product.gender).map((i) => {
							return (
								`<li class="c-label_item -gender" data-i=${i}>
									${product.gender[i]}
								</li>`)
							}).join('')
						: null
					}
					<li class="c-label_item -name">
						${product.productName}
					</li>
				</ul>`;

		$('.c-contentsPanel .c-contentsPanel_image').html(image);
		$('.c-contentsPanel .c-contentsPanel_inner').html(content);


	}

	var relatedProducts = () => {
		var product = state.contentSelected;
		var relatedProductsComponent =
			`	<h2 class="c-shoulderSection_title">
				${product.relatedProducts.title}
			</h2>
			<ul class="c-productButtonGroup">
			</ul>
		`;

		$('.c-shoulderSection').html(relatedProductsComponent);

		if (product.relatedProducts && product.relatedProducts.productList.length > 0) {
			console.log('related')

			for (var data in product.relatedProducts.productList) {
				console.log(product.relatedProducts.productList[data], 'data');
				getRelatedProduct(product.relatedProducts.productList[data])
			}
		}

	}

	var getRelatedProduct = (data) => {
		let productComponent = `
			<li class="c-productButtonGroup_item">
				<a class="c-productButton js-trackEvent"
					data-category="L3_20ss_masterpiece_comfort_jacket_details_page" data-label="L4_425035"
					href="${data.productUrl}">
					<figure class="u-imgAdjustBox" data-aspect-ratio="1:1">
						<picture class="u-imgAdjustBox_inner">
								<img class="fr-img lazyloaded"
								src="${data.image}"
								data-src="${data.image}"
								alt="Comfort jacket" data-expand="300">
						</picture>
					</figure>
					<div class="c-productButton_inner">
						<p class="c-productButton_gender">
							${data.gender}
						</p>
						<h3 class="c-productButton_title">
							${data.productName}
						</h3>
						<p class="c-productButton_viewProduct">
							View Product
						</p>
					</div>
				</a>
				<a class="c-linkButton js-trackEvent" href="https://www.uniqlo.com/jp/store/feature/uq/cutsewl/women/" 
				data-category="L3_20ss_masterpiece_supima_cotton_crew_neck_shirt_details_page" 
				data-label="L3_ws_t_shirt">${data.gender} related products</font></a>
			</li>
			`


		$('.c-productButtonGroup').append(productComponent)
	}

	var topArticles = () => {
		let test = masterpieceData
			.filter(product => {
				console.log(product.title.toLowerCase() !== state.contentSelected.title.toLowerCase() && 
						product.category.toLowerCase() === state.contentSelected.category.toLowerCase())

		

				return (product.title.toLowerCase() !== state.contentSelected.title.toLowerCase() && 
						product.category.toLowerCase() === state.contentSelected.category.toLowerCase())
			})
		console.log(test, 'test')


		let articles = masterpieceData
			.filter(product => product.title.toLowerCase() !== state.contentSelected.title.toLowerCase() && product
				.category.toLowerCase() === state.contentSelected.category.toLowerCase())
			.map((product, i) => {
				console.log(product, 'article')
				return (
					`
					<li class="c-relatedButtonGroup_item"><a class="c-relatedButton js-trackEvent"
							data-category="L3_20ss_masterpiece_fine_cloth_shirt_details_page"
							data-label="L3_20ss_masterpiece_premium_linen_details_page"
							href="/jp/ja/contents/feature/masterpiece/001-premium-linen.html">
							<figure class="u-imgAdjustBox" data-aspect-ratio="1:1">
								<picture class="u-imgAdjustBox_inner">
								
									<source data-srcset="${product.image}"
										type="image/jpeg"
										srcset="${product.image}"><img
										class="fr-img lazyloaded"
										src="${product.image}"
										data-src="${product.image}"
										alt="${product.title}" data-expand="300">
								</picture>
							</figure>
							<div>
								<h3 class="c-relatedButton_title">
									${product.title}
								</h3>
								<p class="c-relatedButton_name">
									${product.productName}
								</p>
							</div>
						</a>
					</li>
					`
				)
			})
		console.log(articles, 'articles')

		$('.c-relatedButtonGroup').html(articles.join(''))
	}

	var productPage = () => {
		var productPageComponent =
			`<div class="l-container">
				<article class="c-contents">
					<div class="c-contentsPanel">
						<div class="c-contentsPanel_image"></div>
						<div class="c-contentsPanel_inner"></div>
					</div>
					<section class="c-shoulderSection"></section>

				</article>
				<aside class="l-relatedAside">
					<h2 class="l-relatedAside_title">
						Tops Articles
					</h2>
					<ul class="c-relatedButtonGroup"></ul>

				</aside>
				<a class="c-topPageButton js-trackEvent" href="/jp/ja/contents/feature/masterpiece/"
					data-category="L3_20ss_masterpiece_comfort_jacket_details_page" data-label="#">
					<figure class="u-imgAdjustBox" data-aspect-ratio="322:119">
						<picture class="u-imgAdjustBox_inner">
							<source data-srcset="/jp/ja/contents/feature/masterpiece/img/button-back-to-top.webp?20200306"
								type="image/webp"
								srcset="/jp/ja/contents/feature/masterpiece/img/button-back-to-top.webp?20200306">
							<source data-srcset="/jp/ja/contents/feature/masterpiece/img/button-back-to-top.png?20200306"
								type="image/png"
								srcset="/jp/ja/contents/feature/masterpiece/img/button-back-to-top.png?20200306"><img
								class="fr-img lazyloaded"
								src="/jp/ja/contents/feature/masterpiece/img/button-back-to-top.png?20200306"
								data-src="/jp/ja/contents/feature/masterpiece/img/button-back-to-top.png?20200306"
								alt="UNIQLO MASTERPIECE BACK TO TOP" data-expand="300">
						</picture>
					</figure>
				</a>
			</div>`

		if (state.contentSelected) {
			$('.main').html(productPageComponent);
			productInfo();
			relatedProducts();
			topArticles();
		} else {
			$('.main').html('Page not found');
		}


	}
	// Init App
	$(document).ready(() => {
		// Check for query
		if (window.location.href.includes('?product=')) {
			console.log('product page');

		} else {
			console.log('home')
		}

		var findProductPageData = masterpieceData.filter((data) => {
			return data.category.toLowerCase() === 'tops' && data.title.toLowerCase() === 'linen page'
		})

		if (findProductPageData && findProductPageData.length > 0) {
			state.contentSelected = findProductPageData[0]
		} else {
			state.contentSelected = null;
		}


		console.log(state, 'state')

		// $('.main').html(homepage)

		productPage();


		// Actions 	
		$('.l-navigation_item').click((e) => {
			state.filter = e.currentTarget.dataset.filterButton
			homepageProductList()
		})

		$('.c-contentsCard .js-trackEvent').click((e) => {
			event.preventDefault()
			console.log(e.currentTarget.dataset)
		})

	})

	// GA TAG

	var shopByLookGA = (e) => {
		if (!(e.dataset)) {
			event.preventDefault();
		}

		var value = e.dataset && e.dataset.label ? e.dataset.label.toLowerCase() : e;
		var urlPrefix = 'https://www.uniqlo.com/us/en';

		if (window.location.href.includes('staging')) {
			urlPrefix = 'https://staging-na-uniqlo.demandware.net/s/UniqloUS'
		}

		if (window.location.href.includes('development')) {
			urlPrefix = 'https://development-na-uniqlo.demandware.net/s/UniqloUS'
		}

		var path = window.location.href.split('?')[0].replace(urlPrefix, '');
		if (path.substring(path.length - 1) !== '/') {
			path = path + '/'
		}

		// dataLayer.push({
		// 	'event': 'eventTracking',
		// 	'eventCategory': 'category page',
		// 	'eventAction': `clicked category: ${path}`,
		// 	'eventLabel': `l3_${value}`
		// })
	}

</script>
